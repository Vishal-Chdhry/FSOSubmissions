(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),r=t(3),u=t(2),o=t(0),i=function(e){var n=e.name,t=e.handleDelete;return Object(o.jsxs)("p",{children:[" ",n.name," ",n.number," ",Object(o.jsx)("button",{onClick:t,children:"delete"})]})},s=function(e){return Object(o.jsxs)("form",{onSubmit:e.addPerson,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(o.jsx)("br",{}),"number: ",Object(o.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){return Object(o.jsx)("div",{children:e.filterOutput.map((function(e){return Object(o.jsxs)("p",{children:[e.name," ",e.number]},e.id)}))})},j=t(4),d=t.n(j),l="/api/persons",h=function(){return d.a.get(l).then((function(e){return e.data}))},f=function(e){return d.a.post(l,e).then((function(e){return e.data}))},O=function(e,n){return d.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},x=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),j=Object(r.a)(a,2),d=j[0],l=j[1],x=Object(u.useState)(""),p=Object(r.a)(x,2),v=p[0],g=p[1],w=Object(u.useState)(""),N=Object(r.a)(w,2),S=N[0],k=N[1],y=Object(u.useState)([]),C=Object(r.a)(y,2),D=C[0],P=C[1],E=Object(u.useState)(null),I=Object(r.a)(E,2),J=I[0],B=I[1],q=Object(u.useState)(null),z=Object(r.a)(q,2),A=z[0],F=z[1];Object(u.useEffect)((function(){h().then((function(e){c(e)}))}),[]);var G=t.map((function(e){return e.name})),H=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"notification",children:n})},K=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"error",children:n})};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(H,{message:J}),Object(o.jsx)(K,{message:A}),Object(o.jsx)("form",{onSubmit:function(e){P([]),e.preventDefault(),P(t.filter((function(e){return-1!==e.name.indexOf(S)}))),k("")},children:Object(o.jsxs)("div",{children:["filter shown with:",Object(o.jsx)("input",{value:S,onChange:function(e){k(e.target.value)}}),Object(o.jsx)("br",{}),Object(o.jsx)("button",{type:"submit",children:"search"}),Object(o.jsx)(b,{filterOutput:D})]})}),Object(o.jsx)("div",{}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(s,{addPerson:function(e){e.preventDefault();var n={name:d,number:v};if(-1!==G.indexOf(d)&&window.confirm("".concat(d," is already added to phonebook, do you want to replace the number")))return B("".concat(d,"' s number has been replaced")),O(t[G.indexOf(d)].id,n),h().then((function(e){c(e)})),l(""),g("");f(n).then((function(e){c(t.concat(e)),B("".concat(d," has been added to the phonebook"))})).catch((function(e){return F(e.response.data.error)})),l(""),g("")},newName:d,newNumber:v,handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){g(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)("div",{children:t.map((function(e){return Object(o.jsx)("div",{children:Object(o.jsx)(i,{name:e,handleDelete:function(){return n=e,void(window.confirm("Do you really want to delete ".concat(n.name))&&(m(n.id).catch((function(e){F("Information about ".concat(n.name," has already been removed from the server"))})),h().then((function(e){c(e)}))));var n}})},e.id)}))})]})};t(38);a.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.eef9beb4.chunk.js.map